<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Social</title>
</head>
<body>
    <h1>Book Social</h1>
    <nav class="navig">
        <ul>
            <li><a id="home" href="start.html">Home</a></li>
            <li><a id="create-post" href="create-post.html">Create Post</a></li>
            <li id="profileLink"><a id="profile" href="profile.html">Profile</a></li>
            <li id="registerLink"><a id="register" href="register.html">Register</a></li>
            <li id="loginLink"><a id="login" href="login.html">Login</a></li>
        </ul>        
    </nav>

    <div id="posts-container">
        <script src="script.js"></script>
    </div>

    <footer>
        <p>&copy; 2023 Book Social</p>
    </footer>

    <!-- Import Firebase modules using direct CDN links -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

        // Initialize Firebase with your configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDSVB_m--vKWpFjpa1PSyZoF7slhTdGN08",
            authDomain: "bookweb-99ef4.firebaseapp.com",
            databaseURL: "https://bookweb-99ef4-default-rtdb.firebaseio.com",
            projectId: "bookweb-99ef4",
            storageBucket: "bookweb-99ef4.appspot.com",
            messagingSenderId: "415676602525",
            appId: "1:415676602525:web:5ed67a9357cc9e3b88dc74",
            measurementId: "G-VDFL9E4XYJ"
        };
        initializeApp(firebaseConfig);

        // Function to update links based on authentication status
        function updateLinksOnAuth() {
            const registerButton = document.getElementById('register');
            const loginButton = document.getElementById('login');
            const profileButton = document.getElementById('profile');
            const createPostButton = document.getElementById('create-post');

            const user = getAuth().currentUser;

            if (user) {
                // User is logged in
                registerButton.style.display = 'none';
                loginButton.style.display = 'none';
                profileButton.style.display = 'block';
                createPostButton.style.display = 'none';
            } else {
                // User is not logged in
                registerButton.style.display = 'block';
                loginButton.style.display = 'block';
                profileButton.style.display = 'none';
                createPostButton.style.display = 'none';
            }
        }

        // Call the function to check auth status on page load and whenever authentication state changes
        getAuth().onAuthStateChanged(function (user) {
            updateLinksOnAuth();
        });
    </script>
</body>
</html>
